<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="msvalidate.01" content="30681728D02314C28E73C01119E51FE8" />
        
        
        <link rel="canonical" href="http://help.ninefold.com/apps/deploying_a_rails_app_with_your_own_database/">
        <link rel="shortcut icon" href="../../img/favicon.ico">

        <title>Deploying a Rails app with your own database - Ninefold</title>

        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/prettify-1.0.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        

       <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-20888012-1', 'auto');
            ga('send', 'pageview');

        </script>

        <script>
          (function() {
            var cx = '007510500888672052678:j-vcw1lhenu';
            var gcse = document.createElement('script');
            gcse.type = 'text/javascript';
            gcse.async = true;
            gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
                '//www.google.com/cse/cse.js?cx=' + cx;
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(gcse, s);
          })();
        </script>
        
    </head>

    <body>

        <div id="ninefold-nav" class="navbar navbar-inverse " role="navigation">
    <div class="container">
        <div class="ninefold-nav">
            <div class="navbar-header">
                <a title="Ninefold" class="mast__topbar__logo logo" href="https://ninefold.com"></a>
              
                
           
            </div>
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".nine-navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <div class="collapse nine-navbar-collapse navbar-collapse">
                <ul class="nav navbar-nav">
                <li>
                  <a href="https://ninefold.com/pricing">Pricing</a>
                </li>
                <li>
                  <a href="https://ninefold.com/performance">Performance</a>
                </li>
                <li>
                  <a href="https://ninefold.com/testimonials">Testimonials</a>
                </li>
                <li>
                  <a href="https://ninefold.com/news">News</a>
                </li>
                <li>
                  <a href="https://ninefold.com/blog">Blog</a>
                </li>
                <li>
                  <a href="https://ninefold.com/about-us">About Us</a>
                </li>
                <li class="active">
                  <a href="http://help.ninefold.com">Docs</a>
                </li>
                <li class="signin">
                  <a href="http://portal.ninefold.com">Sign in</a>
                </li>
                </ul>
            </div>

        </div>
    </div>

</div>
<div class="main-nav">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".main-navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <i class="fa fa-chevron-down"></i>
            </button>

            <!-- Main title -->
            <!-- <a class="navbar-brand" href="../..">Ninefold</a> -->
        </div>

        <!-- Expanded navigation -->
        <div class="main-navbar-collapse navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li >
                    <a href="../..">Home</a>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Getting Started <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../getstarted/how_to_deploy_an_app/">How to deploy an app</a>
                        </li>
                    
                        <li >
                            <a href="../../getstarted/how_to_install_and_utilize_the_cli/">How to install and utilize the CLI</a>
                        </li>
                    
                        <li >
                            <a href="../../getstarted/how_to_migrate_from_heroku/">How to migrate from Heroku</a>
                        </li>
                    
                        <li >
                            <a href="../../getstarted/how_ninefold_works_with_github_bitbucket_and_git_url/">How Ninefold works with GitHub, Bitbucket and Git URL</a>
                        </li>
                    
                        <li >
                            <a href="../../getstarted/exporting_and_importing_postgresql_data/">Exporting and importing PostgreSQL data</a>
                        </li>
                    
                        <li >
                            <a href="../../getstarted/how_to_deploy_diaspora/">How to deploy Diaspora on Ninefold</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">App Deployment <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../deployment_with_continuous_integration_ci/">Deployment with continuous integration (CI)</a>
                        </li>
                    
                        <li class="active">
                            <a href="./">Deploying a Rails app with your own database</a>
                        </li>
                    
                        <li >
                            <a href="../asset_precompile_on_ninefold/">Asset precompilation on Ninefold</a>
                        </li>
                    
                        <li >
                            <a href="../setting_up_deployment_notifications/">Setting up deployment notifications</a>
                        </li>
                    
                        <li >
                            <a href="../zero_downtime_deployment_for_your_ninefold_rails_app/">Zero downtime deployment for your Rails app</a>
                        </li>
                    
                        <li >
                            <a href="../setting_and_changing_your_apps_configuration/">Setting and changing your app configuration and infrastructure</a>
                        </li>
                    
                        <li >
                            <a href="../private_gem_repos_on_github_and_bitbucket/">Private gem repos on GitHub and Bitbucket</a>
                        </li>
                    
                        <li >
                            <a href="../what_happens_and_what_gets_built_on_a_rails_app_deployment/">What happens and what gets built when you deploy your app</a>
                        </li>
                    
                        <li >
                            <a href="../ssl_management_for_rails_apps/">SSL for Rails apps</a>
                        </li>
                    
                        <li >
                            <a href="../dns_management_for_rails_apps/">DNS management for Rails apps</a>
                        </li>
                    
                        <li >
                            <a href="../adding_sendgrid_to_your_rails_app/">Adding SendGrid to your Rails app</a>
                        </li>
                    
                        <li >
                            <a href="../creating_scheduled_tasks_in_rails/">Creating scheduled tasks in Rails</a>
                        </li>
                    
                        <li >
                            <a href="../backing_up_and_restoring_your_rails_db/">Backing up and restoring your database</a>
                        </li>
                    
                        <li >
                            <a href="../redeploying_an_app/">Redeploying an app</a>
                        </li>
                    
                        <li >
                            <a href="../postgres_and_postgis_and_modules/">PostgreSQL, PostGIS, and PostgreSQL modules</a>
                        </li>
                    
                        <li >
                            <a href="../how_to_utilize_a_cdn_with_ninefold/">How to utilize a CDN with Ninefold (S3 and CloudFront)</a>
                        </li>
                    
                        <li >
                            <a href="../upgrading_from_rails_40_to_41/">Upgrading from Rails 4.0 to 4.1</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Servers <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../servers/how_to_create_a_docker_server/">Docker containers</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/create/">How to create a server</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/resize/">How to resize your server</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/liveview/">How to access your server with live view</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/how_to_clone_your_server/">How to clone a server</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/how_to_attach_and_upload_an_iso/">How to upload and attach an ISO</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/how_to_create_a_template_from_your_server/">How to create a template from your server</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/moving/">Copying or moving servers between regions</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/how_to_add_storage_volumes/">How to add storage volumes</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/how_to_view_attached_and_detached_storage_volumes/">How to view attached and detached storage volumes</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/how_to_detach_then_reattach_a_storage_volume/">How to detach then reattach a storage volume</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/using_backups_to_protect_your_data/">Using backups to protect your data</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/new_server_username_and_password/">New server username and password</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/resetting_server_password/">Reset your server password</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/how_to_connect_to_your_server_using_ssh_rdp/">How to connect to your server using SSH / RDP</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/how_to_activate_windows_server/">How to activate Windows Server</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/microsoft_licensing_can_i_use_my_existing_software_and_licenses_on_ninefold/">Microsoft licensing - Can I use my existing software and licenses?</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Networking <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../networking/ninefold_net/">How to enable Ninefold Net</a>
                        </li>
                    
                        <li >
                            <a href="../../networking/dns_management_for_servers/">DNS management for servers</a>
                        </li>
                    
                        <li >
                            <a href="../../networking/setup_load_balancing_single_zone/">Setup load balancing (single zone)</a>
                        </li>
                    
                        <li >
                            <a href="../../networking/setting_up_static_nat_and_port_forward_for_ip_addresses/">Setting up static NAT & port forward for IP addresses</a>
                        </li>
                    
                        <li >
                            <a href="../../networking/how_to_open_firewall_ports/">How to open firewall ports</a>
                        </li>
                    
                        <li >
                            <a href="../../networking/how_to_setup_global_load_balancing_for_servers/">How to setup global load balancing for servers</a>
                        </li>
                    
                        <li >
                            <a href="../../networking/how_to_delegate_your_domain_to_ninefold/">How to delegate your domain to Ninefold</a>
                        </li>
                    
                        <li >
                            <a href="../../networking/how_to_release_or_unassign_your_ip_addresses/">How to release or unassign your IP addresses</a>
                        </li>
                    
                        <li >
                            <a href="../../networking/how_to_use_multiple_ip_addresses_on_a_server/">How to use multiple IP addresses on a server</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Accounts & Billing <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../billing/freetrial/">Free trial</a>
                        </li>
                    
                        <li >
                            <a href="../../billing/createuser/">Creating additional users</a>
                        </li>
                    
                        <li >
                            <a href="../../billing/closeaccount/">How to close your account</a>
                        </li>
                    
                        <li >
                            <a href="../../billing/faq/">Billing FAQ</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Reference <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../reference/faq/">FAQ</a>
                        </li>
                    
                        <li >
                            <a href="../../reference/apdex/">Apdex to measure user satisfaction</a>
                        </li>
                    
                        <li >
                            <a href="../../reference/API/">Using the API (v2)</a>
                        </li>
                    
                        <li >
                            <a href="../../reference/contributing/">Contribute to our docs</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-left">
                
                
                <li>
                   <a href="#searchModal" data-toggle="modal"><i class="fa fa-search"></i></a> 
 
                </li>
            
                
                <!-- 
                <li>
                    <a href="https://github.com/ninefold/docs/">
                        
                            <i class="fa fa-github"></i>
                        
                        GitHub
                    </a>
                </li>
                 -->
            </ul>
        </div>
    </div>
</div>

        <div class="container-fluid">
         
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#deploying-a-rails-app-with-your-own-database">Deploying a Rails app with your own database</a></li>
        
            <li class="subsection"><a href="#infrastructure">Infrastructure</a></li>
        
            <li class="subsection"><a href="#gemfile">Gemfile</a></li>
        
            <li class="subsection"><a href="#databaseyml-configuration">Database.yml configuration</a></li>
        
            <li class="subsection"><a href="#deploying-an-app-with-byod">Deploying an app with BYOD</a></li>
        
            <li class="subsection"><a href="#environmental-variables">Environmental variables</a></li>
        
            <li class="subsection"><a href="#before-migration-triggers">Before migration triggers</a></li>
        
    
    </ul>
</div></div>

            <div class="col-md-9" role="main">

                <div class="col-md-12 hidden-xs hidden-sm">
                    <a href="https://github.com/ninefold/docs/tree/master/docs/apps/deploying_a_rails_app_with_your_own_database.md" class="github-btn btn btn-default pull-right"> <span class="fa fa-github"></span> Edit on GitHub</a>
                </div>
                <div class="col-md-12 hidden-xs hidden-sm"></br></div>
                
                   

<h2 id="deploying-a-rails-app-with-your-own-database">Deploying a Rails app with your own database</h2>
<p>Out of the box, Ninefold enables you to implement a database server with PostgreSQL installed. Want to bring your own database? Read on! The following is our recommendation on how to implement BYOD.</p>
<p>Before you deploy, we recommend you read the entire article so you deploy with all of the current settings. There is a quiz at the end of the article!</p>
<h4 id="infrastructure">Infrastructure</h4>
<p>If your want your DB hosted on Ninefold and its not PostgreSQL, Please ensure you deploy this as a bare virtual server before deploying your app ensuring you tick the 'Enable NinefoldNet' box to ensure it is provisioned on the same private network as your app.</p>
<h4 id="gemfile">Gemfile</h4>
<p>Include the relevant database gem in your Gemfile. Be sure to bundle install!</p>
<p>Example for this article will be with MySQL:</p>
<pre class="prettyprint well"><code># Use mysql as the database for Active Record

gem 'mysql2'
</code></pre>
<h4 id="databaseyml-configuration">Database.yml configuration</h4>
<p>If you have a database.yml file, change it to database.yml.sample. In an effort to keep your passwords out of your repo (no fun if they get out there!), alter the file to the following format for the Rails environment being used on your Ninefold app.</p>
<p>For a ‘production’ environment:</p>
<pre class="prettyprint well"><code>production:

    adapter: mysql2

    database: your_db_name

    host: #{DATABASE_URL} or ENV[DATABASE_URL]
</code></pre>
<p>Your file can include encoding, if you like.</p>
<h4 id="deploying-an-app-with-byod">Deploying an app with BYOD</h4>
<p>In the deployment wizard, just uncheck the <strong>I would like a database built for my app</strong> box in Step 3 of 4.</p>
<h4 id="environmental-variables">Environmental variables</h4>
<p>In Portal, we have the Environment variables section (under the Configuration tab) or in Step 4 of 4, we will ask for your variables. You will want to include the following configured line for your database:</p>
<pre class="prettyprint well"><code>DATABASE_URL=mysql://username:password/location:port/your_db_name
</code></pre>
<p>in the <strong>Environment Variable</strong> window.</p>
<h4 id="before-migration-triggers">Before migration triggers</h4>
<p>Also in Step 4 of 4, add a <strong>before migrations trigger</strong> (under Additional deployment commands):</p>
<pre class="prettyprint well"><code>mv config/database.yml.sample config/database.yml
</code></pre>
<p><em>Quiz: just kidding but we’re glad you read to the bottom!</em></p>


</br></br></br></br>
            </div>
        </div>

        <div class="modal fade" id="searchModal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title" id="searchModalLabel">Documentation search</h4>
      </div>
      <div class="modal-body">

        <form onsubmit="return executeQuery();" id="cse-search-box-form-id">
          <input type="search" class="form-control" id="cse-search-input-box-id" placeholder="Search">
        </form>

        <script type="text/javascript">
          function executeQuery() {
            var input = document.getElementById('cse-search-input-box-id');
            var element = google.search.cse.element.getElement('searchresults-only0');
            if (input.value == '') {
              element.clearAllResults();
            } else {
              element.execute(input.value);
            }
            return false;
          }
        </script>


        <gcse:searchresults-only></gcse:searchresults-only>
       
      </div>
    </div>
  </div>
</div>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <script src="../../js/bootstrap.min.js"></script>
        <script src="../../js/prettify-1.0.min.js"></script>

        <script src="../../js/base.js"></script>
    </body>
</html>