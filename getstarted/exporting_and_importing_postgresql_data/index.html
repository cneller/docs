<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="http://help.ninefold.com/getstarted/exporting_and_importing_postgresql_data/">
        <link rel="shortcut icon" href="../../img/favicon.ico">

        <title>Exporting and importing PostgreSQL data - Ninefold</title>

        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/prettify-1.0.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        

        <script type="text/javascript">
        var __lc = {};
        __lc.license = 1076997;

        (function() {
            var lc = document.createElement('script'); lc.type = 'text/javascript'; lc.async = true;
            lc.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'cdn.livechatinc.com/tracking.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(lc, s);
        })();
        </script>
        
    </head>

    <body>

        <div id="ninefold-nav" class="navbar navbar-inverse " role="navigation">
    <div class="container">
        <div class="ninefold-nav">
            <div class="navbar-header">
                <a title="Ninefold" class="mast__topbar__logo logo" href="/"></a>
              
                
           
            </div>
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".nine-navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <div class="collapse nine-navbar-collapse navbar-collapse">
                <ul class="nav navbar-nav">
                <li>
                  <a href="https://ninefold.com/pricing">Pricing</a>
                </li>
                <li>
                  <a href="https://ninefold.com/performance">Performance</a>
                </li>
                <li>
                  <a href="https://ninefold.com/testimonials">Testimonials</a>
                </li>
                <li>
                  <a href="https://ninefold.com/news">News</a>
                </li>
                <li>
                  <a href="https://ninefold.com/blog">Blog</a>
                </li>
                <li>
                  <a href="https://ninefold.com/about-us">About Us</a>
                </li>
                <li class="active">
                  <a href="https://help.ninefold.com">Docs</a>
                </li>
                <li class="signin">
                  <a href="http://portal.ninefold.com">Sign in</a>
                </li>
                </ul>
            </div>

        </div>
    </div>

</div>
<div class="main-nav">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".main-navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <i class="fa fa-chevron-down"></i>
            </button>

            <!-- Main title -->
            <!-- <a class="navbar-brand" href="../..">Ninefold</a> -->
        </div>

        <!-- Expanded navigation -->
        <div class="main-navbar-collapse navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li >
                    <a href="../..">Home</a>
                </li>
            
            
            
                <li class="dropdown active">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Getting Started <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../how_to_deploy_an_app/">How to deploy an app</a>
                        </li>
                    
                        <li >
                            <a href="../how_to_install_and_utilize_the_cli/">How to install and utilize the CLI</a>
                        </li>
                    
                        <li >
                            <a href="../how_to_migrate_from_heroku/">How to migrate from Heroku</a>
                        </li>
                    
                        <li >
                            <a href="../how_ninefold_works_with_github_bitbucket_and_git_url/">How Ninefold works with GitHub, Bitbucket and Git URL</a>
                        </li>
                    
                        <li class="active">
                            <a href="./">Exporting and importing PostgreSQL data</a>
                        </li>
                    
                        <li >
                            <a href="../how_to_deploy_diaspora/">How to deploy Diaspora on Ninefold</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">App Deployment <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../apps/deployment_with_continuous_integration_ci/">Deployment with continuous integration (CI)</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/deploying_a_rails_app_with_your_own_database/">Deploying a Rails app with your own database</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/asset_precompile_on_ninefold/">Asset precompilation on Ninefold</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/setting_up_deployment_notifications/">Setting up deployment notifications</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/zero_downtime_deployment_for_your_ninefold_rails_app/">Zero downtime deployment for your Rails app</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/setting_and_changing_your_apps_configuration_and_infrastructure/">Setting and changing your app configuration and infrastructure</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/private_gem_repos_on_github_&_bitbucket/">Private gem repos on GitHub and Bitbucket</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/what_happens_and_what_gets_built_on_a_rails_app_deployment/">What happens and what gets built when you deploy your app</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/ssl_management_for_rails_apps/">SSL for Rails apps</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/dns_management_for_rails_apps/">DNS management for Rails apps</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/adding_sendgrid_to_your_rails_app/">Adding SendGrid to your Rails app</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/creating_scheduled_tasks_in_rails/">Creating scheduled tasks in Rails</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/backing_up_and_restoring_your_rails_db/">Backing up and restoring your database</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/redeploying_an_app/">Redeploying an app</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/postgres_and_postgis_and_modules/">PostgreSQL, PostGIS, and PostgreSQL modules</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/how_to_utilize_a_cdn_with_ninefold/">How to utilize a CDN with Ninefold (S3 and CloudFront)</a>
                        </li>
                    
                        <li >
                            <a href="../../apps/upgrading_from_rails_40_to_41/">Upgrading from Rails 4.0 to 4.1</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Servers <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../servers/how_to_create_a_docker_server/">Docker containers</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/create/">How to create a server</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/resize/">How to resize your server</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/liveview/">How to access your server with live view</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/how_to_clone_your_server/">How to clone a server</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/how_to_attach_and_upload_an_iso/">How to upload and attach an ISO</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/how_to_create_a_template_from_your_server/">How to create a template from your server</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/moving/">Copying or moving servers between regions</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/how_to_add_storage_volumes/">How to add storage volumes</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/how_to_view_attached_and_detached_storage_volumes/">How to view attached and detached storage volumes</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/how_to_detach_then_reattach_a_storage_volume/">How to detach then reattach a storage volume</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/using_backups_to_protect_your_data/">Using backups to protect your data</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/new_server_username_and_password/">New server username and password</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/resetting_server_password/">Reset your server password</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/how_to_connect_to_your_server_using_ssh_rdp/">How to connect to your server using SSH / RDP</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/how_to_activate_windows_server/">How to activate Windows Server</a>
                        </li>
                    
                        <li >
                            <a href="../../servers/microsoft_licensing_can_i_use_my_existing_software_and_licenses_on_ninefold/">Microsoft licensing - Can I use my existing software and licenses?</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Networking <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../networking/ninefold_net/">How to enable Ninefold Net</a>
                        </li>
                    
                        <li >
                            <a href="../../networking/dns_management_for_servers/">DNS management for servers</a>
                        </li>
                    
                        <li >
                            <a href="../../networking/setup_load_balancing_single_zone/">Setup load balancing (single zone)</a>
                        </li>
                    
                        <li >
                            <a href="../../networking/setting_up_static_nat_&_port_forward_for_ip_addresses/">Setting up static NAT & port forward for IP addresses</a>
                        </li>
                    
                        <li >
                            <a href="../../networking/how_to_open_firewall_ports/">How to open firewall ports</a>
                        </li>
                    
                        <li >
                            <a href="../../networking/how_to_setup_global_load_balancing_for_servers/">How to setup global load balancing for servers</a>
                        </li>
                    
                        <li >
                            <a href="../../networking/how_to_delegate_your_domain_to_ninefold/">How to delegate your domain to Ninefold</a>
                        </li>
                    
                        <li >
                            <a href="../../networking/how_to_release_or_unassign_your_ip_addresses/">How to release or unassign your IP addresses</a>
                        </li>
                    
                        <li >
                            <a href="../../networking/how_to_use_multiple_ip_addresses_on_a_server/">How to use multiple IP addresses on a server</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Accounts & Billing <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../billing/freetrial/">Free trial</a>
                        </li>
                    
                        <li >
                            <a href="../../billing/createuser/">Creating additional users</a>
                        </li>
                    
                        <li >
                            <a href="../../billing/closeaccount/">How to close your account</a>
                        </li>
                    
                        <li >
                            <a href="../../billing/faq/">Billing FAQ</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Reference <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="../../reference/faq/">FAQ</a>
                        </li>
                    
                        <li >
                            <a href="../../reference/apdex/">Apdex to measure user satisfaction</a>
                        </li>
                    
                        <li >
                            <a href="../../reference/API/">Using the API (v2)</a>
                        </li>
                    
                        <li >
                            <a href="../../reference/contributing/">Contribute to our docs</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                
                <!-- 
                <li>
                    <a href="https://github.com/ninefold/docs/">
                        
                            <i class="fa fa-github"></i>
                        
                        GitHub
                    </a>
                </li>
                 -->
            </ul>
        </div>
    </div>
</div>

        <div class="container-fluid">
         
            <div class="col-md-3"><div class="bs-sidebar hidden-print hidden-xs hidden-sm affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#exporting-and-importing-postgresql-data">Exporting And Importing PostgreSQL Data</a></li>
    
    </ul>
</div>
</div>

            <div class="col-md-9" role="main">

                <div class="col-md-12 hidden-xs hidden-sm">
                    <a href="https://github.com/ninefold/docs/tree/master/docs/getstarted/exporting_and_importing_postgresql_data.md" class="github-btn btn btn-default pull-right"> <span class="fa fa-github"></span> Edit on GitHub</a>
                </div>
                <div class="col-md-12 hidden-xs hidden-sm"></br></div>
                
                   

<h2 id="exporting-and-importing-postgresql-data">Exporting And Importing PostgreSQL Data</h2>
<p>PostgreSQL allows for users to import and export their databases, whether it’s for backup purposes or to transfer data between servers or environments.  In either case, certain formats require certain commands.  Although there are no right and wrong ways to do this, the article will focus first on the recommended way, then on alternative ways.</p>
<h4 id="the-recommended-way-for-exportimport-terminal">THE RECOMMENDED WAY FOR EXPORT/IMPORT: TERMINAL</h4>
<p>The terminal method is great for custom exporting and importing of a database. The high-level overview is the following:</p>
<ol>
<li>Open up port 5432 in Ninefold Portal</li>
<li>Type in your Terminal commands to export or import</li>
<li>Close port 5432</li>
</ol>
<p>Read on for more information about each.</p>
<p><em>Note: These directions have been tested with Postgres 9.3.x</em></p>
<h4 id="open-port-5432">Open port 5432</h4>
<p>Port 5432 is the TCP port that Postgres listens in on.  By default it is closed for security.</p>
<ol>
<li>Start from the Database tab (Portal &gt; App &gt; Database tab)</li>
<li>Click on the server URL under the Database servers section</li>
<li>In the new window, click on the Network tab</li>
<li>Add in ‘5432’ in both Start and End, then click Add</li>
</ol>
<h4 id="exporting">Exporting</h4>
<p>In Terminal, type one of the following. There may be other flags you’d like to append; put those in before the &gt; sign.  </p>
<p><strong>Uncompressed:</strong></p>
<pre class="prettyprint well"><code>$ pg_dump -h IP_ADDRESS -p 5432 -U app -N postgis -N topology -d DATABASE_NAME &gt; your_file_name.sql
</code></pre>
<p><strong>Compressed:</strong></p>
<pre class="prettyprint well"><code>$ pg_dump -h IP_ADDRESS -p 5432 -U app -a -N postgis -N topology -Fc -d DATABASE_NAME &gt; your_file_name.dump
</code></pre>
<p><strong>The variables</strong></p>
<p>IP_ADDRESS = The IP address of your database server</p>
<p>DATABASE_NAME = The database name of your server (found on the Database tab of your app)</p>
<p><strong>The flags</strong></p>
<ul>
<li>-h = Host</li>
<li>-p = Port</li>
<li>-U = User</li>
<li>-d = Database name</li>
<li>-N = Exclude schema (in particular, exclude the PostGIS and topology schema if you aren’t using any of their geographic functionality)</li>
<li>-Fc = Format compressed</li>
</ul>
<p><strong>Optional flags</strong></p>
<ul>
<li>-a = Data only</li>
<li>-c = Clean</li>
</ul>
<p>You will then be prompted to enter the database password. This is on the Database tab. Click <strong>Show</strong> to view the password.</p>
<p><em>NOTE: If you’re exporting your database from an external hosting provider like <a href="https://devcenter.heroku.com/articles/heroku-postgres-import-export">Heroku</a>, please check their documentation.</em></p>
<h4 id="importing">Importing</h4>
<p>Much like Exporting, there’s only one step. However the command to use will depend on the type of file created during the Export process.  If using an external hosting provider’s backup file, you will most likely need to use the command for Compressed files.  The commands and flags are very similar to pg_dump with some slight nuances.</p>
<p><em>WARNING: This will override your database! If unsure, backup your database before overriding it.</em></p>
<p><strong>Uncompressed:</strong></p>
<pre class="prettyprint well"><code>$ psql -h IP_ADDRESS -p 5432 -U app -f your_file_name.sql
</code></pre>
<p><strong>Compressed:</strong></p>
<pre class="prettyprint well"><code>$ pg_restore -h IP_ADDRESS -p 5432 -U app -d DATABASE_NAME your_file_name.dump
</code></pre>
<p>A word on importing. Running the import command most likely will produce errors, such as “Error: role app already exists.”  This is expected behavior as the database that you’re importing into already has been created; tables, keys, and roles will already exist. However the data should transfer amicably. It is a good idea to confirm that your actual data (not tables or schema) has been transferred properly.</p>
<h4 id="close-port-5432">Close port 5432</h4>
<ol>
<li>Start from the Database tab (Portal &gt; App &gt; Database tab)</li>
<li>Click on the server URL under the Database servers section</li>
<li>In the new window, click on the Network tab</li>
<li>Click Remove for port ‘5432’ and click OK to confirm.</li>
</ol>
<h3 id="additional-ways-to-export-databases-from-ninefold">ADDITIONAL WAYS TO EXPORT DATABASES FROM NINEFOLD</h3>
<p>Currently there are a few methods to use in order to export your database.  Each of these has their own merits. Our recommended method may be the Terminal as it’s the most robust, however we would be remiss if we did not share the other methods with you.</p>
<h4 id="cli">CLI</h4>
<p>Database backups can be created and downloaded using our CLI. Don’t have it? Get it <a href="http://www.ninefold.com/docs/getstarted/how_to_install_and_utilize_the_cli">now</a>!  Here are the commands to create a manual backup and to download it.</p>
<pre class="prettyprint well"><code>$ ninefold signin  (Sign in with your Portal creds)
$ ninefold db backup   
$ ninefold db download   (This will be downloaded in the current directory)
</code></pre>
<p>The file downloaded will be in YYYY-MM-DDTIME.tar.gz format. Open the archived file and drill down until you get to the .sql file.</p>
<h4 id="portal">Portal</h4>
<p>This is as easy as the CLI, except you will have to log into Ninefold’s Portal.</p>
<ol>
<li>Log into Portal <a href="https://portal.ninefold.com">https://portal.ninefold.com</a></li>
<li>Choose your App from the list &gt; Database tab</li>
<li>Click “Backup now” in the <strong>Manual backups</strong> section.</li>
<li>This may take a while depending on the size of your database.</li>
<li>Click ‘Download’ to download this backup.</li>
</ol>
<p>Alternatively, you can set up scheduled backups. It’s free!  </p>
<h3 id="additional-ways-to-import-databases-to-ninefold">ADDITIONAL WAYS TO IMPORT DATABASES TO NINEFOLD</h3>
<p>As with exporting, importing has a variety of methods to use. This section will focus on using the CLI, Terminal, and a cool (free!) tool called PGAdmin.</p>
<p><em>WARNING: These will override your database! If unsure, backup your database before overriding it.</em></p>
<h4 id="cli_1">CLI</h4>
<p>As always, we’re looking to make your life a bit easier. We now support importing in database dump files (compressed).  Follow the steps above specifically to create compressed dump files.</p>
<p>In the CLI, these are the commands needed to run:</p>
<pre class="prettyprint well"><code>$ ninefold signin (sign in with your Ninefold Portal creds)
$ ninefold db import FILENAME
</code></pre>
<p>Choose the app you want to import into and Boom! You’re good to go.</p>
<h4 id="pgadmin">PGAdmin</h4>
<p><a href="http://www.pgadmin.org/">PGAdmin</a> is a simple and easy-to-use tool for Mac OS X users for dealing with Postgres. However, when restoring with PGAdmin, ensure that you’ve got a compressed dump file (using the -Fc flag), else the restore process will not work.  You will also have to open port 5432 prior to importing the database then close it afterwards.  Directions to do that can be found above.  </p>
<ol>
<li>Choose File &gt; Add Server.</li>
<li>In the next window, fill in the information for Name (whatever you want to call it), Host, Maintenance DB, username, and Password. Click OK to continue.</li>
<li>Once the server’s been added to your list, drill down to your DATABASE_NAME.  From there, right click and choose Restore…</li>
<li>In the next window, choose the location of your .dump file and choose app for Rolename. Option lists #1 and #2 have a plethora of choices to choose from. Click Restore.</li>
<li>Close port 5432 once you have completed the import process.</li>
</ol>
<p>The messages window will display the import process. As with any import process, errors may be displayed.  It is always a good idea to review those errors and also log into the rails console via the CLI to ensure your data has been correctly transferred.</p>
<p>If you’d like to read more about the various Postgres flags used during export and import, check out their awesome documentation:</p>
<ul>
<li><a href="http://www.postgresql.org/docs/9.2/static/app-pgdump.html">pg_dump</a></li>
<li><a href="http://www.postgresql.org/docs/9.2/static/app-pgrestore.html">pg_restore</a></li>
<li><a href="http://www.postgresql.org/docs/9.2/static/app-psql.html">psql</a></li>
</ul>
<hr />
<p>And as always, if you have any questions or have any issues, please drop us a note on chat or create a ticket!</p>

            </div>
        </div>

        

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <script src="../../js/bootstrap.min.js"></script>
        <script src="../../js/prettify-1.0.min.js"></script>

        <script src="../../js/base.js"></script>
    </body>
</html>